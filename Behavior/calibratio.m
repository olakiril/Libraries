%%

1000pulses  25msec 4.3gr
1000        50     12.5
1000        15     1.8
1000        40     9.2
1000        32     6.4
1000        36     7.7


p1 = 3.245;
p2 = 10.337;
func = @(x) p1*x + p2;


%%
p = polyfit(y,x,1);


%%

microLperPulse = ([3.7 12.5 14.7 18.8 25.2]./[986 1418 1100 1022 1070])*1000; %microL/pulse
pulseDuration = [100 200 300 400 500];
%%
cal(1,1) = (34.4-31.1)/1050;
cal(2,1) = (35.4-31.1)/1050;
cal(3,1) = (33.3-31.1)/1050;
cal(2,1) = (35.4-31.7)/1050;
cal(3,1) = (33.3-29.6)/1050;
cal(4,1) = (34.4-30.9)/1050;
cal(5,1) = (35.1-32)/1050;
cal(1,2) = (40/1-31.1)/1113;
cal(1,2) = (40.1-31.1)/1113;
cal(2,2) = (40.8-31.7)/1113;
cal(3,2) = (39.2-29.6)/1209;
cal(4,2) = (38.4-30.9)/1113;
cal(5,2) = (39.8-32)/1113;
cal(1,3) = (48.5-31.1)/1345;
cal(2,3) = (49.7-31.7)/1345;
cal(3,3) = (46.6-29.6)/1345;
cal(4,3) = (47.9-30.9)/1345;
cal(5,3) = (44.2-32)/1034;
cal(1,4) = (47.5-31.1)/934;
cal(2,4) = (48.5-31.7)/934;
cal(3,4) = (45.9-29.6)/934;
cal(4,4) = (48.2-30.9)/934;
cal(5,4) = (46.9-32)/934;
x = cal;
y = 100:100:400;

%%
for i = 1:size(x,1)
    p = polyfit(x(i,:),y,1);
    func = @(xx,p) p(1)*xx + p(2);
    ms(i) = func(6/1000,p);
end